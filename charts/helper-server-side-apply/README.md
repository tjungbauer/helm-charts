

# helper-server-side-apply

  [![Artifact Hub](https://img.shields.io/endpoint?url=https://artifacthub.io/badge/repository/openshift-bootstraps)](https://artifacthub.io/packages/search?repo=openshift-bootstraps)
  [![License](https://img.shields.io/badge/License-Apache_2.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
  [![Lint and Test Charts](https://github.com/tjungbauer/helm-charts/actions/workflows/lint_and_test_charts.yml/badge.svg)](https://github.com/tjungbauer/helm-charts/actions/workflows/lint_and_test_charts.yml)
  [![Release Charts](https://github.com/tjungbauer/helm-charts/actions/workflows/release.yml/badge.svg)](https://github.com/tjungbauer/helm-charts/actions/workflows/release.yml)

  ![Version: 1.0.12](https://img.shields.io/badge/Version-1.0.12-informational?style=flat-square)

 

  ## Description

  Using Server Side Apply to create for example node labelling, requires openshift-gitops 1.6+

Using Server Side Apply to create for example node labelling, taints and roles. requires openshift-gitops 1.6+

**Homepage:** <https://github.com/tjungbauer/helm-charts/tree/main/charts/helper-server-side-apply>

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| tjungbauer | <tjungbau@redhat.com> | <https://blog.stderr.at/> |

## Sources
Source:
* <https://github.com/tjungbauer/helm-charts>
* <https://charts.stderr.at/>
* <https://github.com/tjungbauer/openshift-clusterconfig-gitops>

Source code: https://github.com/tjungbauer/helm-charts/tree/main/charts/helper-server-side-apply

## Parameters

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| nodes | list | `[{"custom_labels":{"environment":"Production","gpu":"true"},"enabled":true,"ignore_argocd_labels":true,"name":"node1","roles":{"infra":true,"worker":true},"spec":{"taints":[{"effect":"NoSchedule","key":"node-role.kubernetes.io/infra","operator":"Equal","value":"reserved"}]}},{"custom_labels":{"environment":"Test","gpu":"true"},"enabled":true,"ignore_argocd_labels":true,"name":"node2","roles":{"infra":true,"worker":true},"spec":{"taints":[{"effect":"NoSchedule","key":"node-role.kubernetes.io/infra","value":"reserved"}]}}]` | List of nodes based on the hostname |
| nodes[0] | object | N/A | Hostname node1 |
| nodes[0].custom_labels | object | N/A | Add some custom labels to the node, as key: value pair |
| nodes[0].enabled | bool | false | Enable node configuration |
| nodes[0].ignore_argocd_labels | bool | true | Ignore ArgoCD labels, argocd wants to add some labels to the nodes, keeping them would lead to a permanent sync of Argo CD |
| nodes[0].roles | object | N/A | Add some roles to the node, as key: value pair. The role will be resolved to node-role.kubernetes.io/{role} |
| nodes[0].spec.taints | list | `[{"effect":"NoSchedule","key":"node-role.kubernetes.io/infra","operator":"Equal","value":"reserved"}]` | Configure taints for the nodes # @default -- N/A |
| nodes[0].spec.taints[0] | object | `{"effect":"NoSchedule","key":"node-role.kubernetes.io/infra","operator":"Equal","value":"reserved"}` | Effect of the taint |
| nodes[0].spec.taints[0].key | string | `"node-role.kubernetes.io/infra"` | Key of the taint |
| nodes[0].spec.taints[0].operator | string | `"Equal"` | Operator of the taint |
| nodes[0].spec.taints[0].value | string | `"reserved"` | Value of the taint |

## Example

```yaml
---
# -- List of nodes based on the hostname
nodes:
  # -- Hostname node1
  # @default -- N/A
  - name: node1

    # -- Enable node configuration
    # @default -- false
    enabled: true

    # -- Ignore ArgoCD labels, argocd wants to add some labels to the nodes, keeping them would lead to a permanent sync of Argo CD
    # @default -- true
    ignore_argocd_labels: true

    # -- Add some custom labels to the node, as key: value pair
    # @default -- N/A
    custom_labels:
      environment: 'Production'
      gpu: 'true'

    # -- Add some roles to the node, as key: value pair. The role will be resolved to node-role.kubernetes.io/{role}
    # @default -- N/A
    roles:
      infra: true
      worker: true

    spec:
      # -- Configure taints for the nodes
      ## @default -- N/A
      taints:
        # -- Effect of the taint
      - effect: NoSchedule
        # -- Key of the taint
        key: node-role.kubernetes.io/infra
        # -- Value of the taint
        value: reserved
        # -- Operator of the taint
        operator: Equal
```

## Installing the Chart

To install the chart with the release name `my-release`:

```console
helm install my-release tjungbauer/<chart-name>>
```

The command deploys the chart on the Kubernetes cluster in the default configuration.

## Uninstalling the Chart

To uninstall/delete the my-release deployment:

```console
helm delete my-release
```

The command removes all the Kubernetes components associated with the chart and deletes the release.

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.14.2](https://github.com/norwoodj/helm-docs/releases/v1.14.2)
